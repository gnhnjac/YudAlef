var cet;(typeof cet=="undefined"||typeof cet.display=="undefined")&&function(n){(function(t){function f(){return}function v(){return!!e}function y(n){o()!="fullscreen"&&(f("available"+i.fsapi.available()),i.fsapi.available()?i.fsapi.enter(n):i.fspoly.enter())}function p(){o()!="inline"&&(i.fsapi.available()?i.fsapi.exit():i.fspoly.exit())}function o(n,t){if(n=="fullscreen"||n=="inline")var i=document.body,r=navigator.userAgent.indexOf("Trident")>-1,f=navigator.userAgent.indexOf("iPad")>-1;return n=="fullscreen"&&(!screenfull.enabled||f||r?y(t):h||(console.log(i),screenfull.toggle(i),console.log("screenfull requested"),h=!0)),n=="inline"&&(!screenfull.enabled||f||r?p():h&&(screenfull.toggle(i),console.log("screenfull exited"),h=!1)),u}function w(n,t){if(!n.attributes["data-cd-id"]||!n.attributes["data-cd-reg"]){n.attributes["data-cd-retries"]||n.setAttribute("data-cd-retries","0");var r=parseInt(n.attributes["data-cd-retries"].value)+1;if(r>50)return;n.setAttribute("data-cd-retries",r.toString());setTimeout(function(){w(n,t)},200);return}n.removeAttribute("data-cd-retries");i.fspoly.setMode(n.attributes["data-cd-id"].value,t)}function b(n){l.push(n)}function c(){for(var n=0;n<l.length;n++)l[n]()}function k(n){r.getValue("parent","hostclientsize",function(t,i){n(i)})}function d(n){a=!0;n&&(s.horizontalMargins=n.horizontalMargins||0,s.verticalMargins=n.verticalMargins||0);f("set fixsizehost true")}var l=[],e=null,u="inline",a=!1,s={horizontalMargins:0,verticalMargins:0},h=!1,r,i;(function(n){function h(n){var t,r,u;if(n.data.indexOf("cet.display")==0){f("received:"+n.data);t=n.data.split("^");r=t[1];switch(t[2].toLowerCase()){case"valueexchange":u=JSON.parse(t[3])[0];p(r,u);break;case"hello":i.tryRegisterChildren()}}}function p(i,r){var o,e,h,y;if(r.type=="getValue"){if(r.value=undefined,o=l(i,"getreq",r,!0),o.length>0){if(e=o[0](i,r),e==undefined&&v()){f("forwarding "+r.key);h=i;y=r.messageID;c("parent",r.key,function(n,i){var r=new u("getValueResult",n,i);r.messageID=y;t(h,"valueexchange",r)});return}f("return "+JSON.stringify(e));r.value=e;r.type="getValueResult";t(i,"valueexchange",r)}}else if(r.type=="setValue")s(i,"set",r);else if(r.type=="getValueResult"){if(s(i,"get",r),!(r.messageID in n.callbacks))return;n.callbacks[r.messageID](r.key,r.value);delete a.callbacks[r.messageID]}}function t(n,t){for(var u,s,f,o=[],r=0;r<arguments.length-2;r++)o[r]=arguments[r+2];if(s=e||"unknown",n!="parent"){if(u=i.getIFrame(n),!u)return;s="parent"}f="cet.display^"+s+"^"+t;o.length>0&&(f+="^"+JSON.stringify(o));u?u.contentWindow.postMessage(f,"*"):window.parent.postMessage(f,"*")}function c(i,f,o){var s=new u("getValue",f);if(n.callbacks[s.messageID]=o,i=="parent"&&!e){r.push({target:i,method:"valueexchange",message:s});return}t(i,"valueexchange",s)}function w(n,i,r){var f=new u("setValue",i,r);t(n,"valueexchange",f)}function s(n,t,i){for(var u=l(n,t,i),r=0;r<u.length;r++)u[r](n,i)}function b(n,t,i,r){o.push({type:t,key:i,handler:r,source:n})}function k(){for(var n=0;n<r.length;n++)t(r[n].target,r[n].method,r[n].message)}function l(n,t,i,r){for(var u,e=[],f=0;f<o.length;f++)u=o[f],u.type!=t&&(u.type!="*"||r)||u.key!="*"&&u.key!=i.key||u.source!="*"&&u.source!=n||e.push(u.handler);return e}var a=n,o=[],d=function(){function n(){}return n}(),r=[],u,y;n.callbacks={};u=function(){function n(n,t,i){this.messageID=Math.random().toString();this.key=t;this.value=i;this.type=n}return n}();y=0;n.post=t;n.getValue=c;n.setValue=w;n.publish=s;n.subscribe=b;n.emptyQueue=k;window.addEventListener?window.addEventListener("message",h,!1):window.attachEvent("onmessage",h)})(r||(r={})),function(n){function i(){for(var t=[],n=0;n<arguments.length-0;n++)t[n]=arguments[n+0];document.documentElement.className+=" "+t.join(" ")}function o(){for(var n,i,r=[],t=0;t<arguments.length-0;t++)r[t]=arguments[t+0];for(n=document.documentElement.className,i=0;i<r.length;i++)n=n.replace(r[i],"");n=n.replace(/  /gi,"");document.documentElement.className=n}function t(){return parent!=self}function s(){var t,n,i;if(document)for(f("register children"),t=document.getElementsByTagName("iframe"),n=0;n<t.length;n++)t[n].attributes["data-cd-reg"]?(i=t[n].attributes["data-cd-id"].value,r.setValue(i,"id",i)):a(t[n])}function h(n){n.setAttribute("data-cd-reg","true");n.setAttribute("allowFullScreen","");n.setAttribute("webkitallowfullscreen","");n.setAttribute("msRequestFullscreen","");n.setAttribute("mozFullScreenEnabled","")}function l(n){return document.querySelector('iframe[data-cd-id="'+n+'"]')}function a(n){var i,t;n.attributes["data-cd-id"]||(i=Math.random(),n.setAttribute("data-cd-id",i.toString()));t=n.attributes["data-cd-id"].value;r.setValue(t,"id",t)}var v,y;n.addHtmlClasses=i;n.removeHtmlClasses=o;n.hasParent=t;n.tryRegisterChildren=s;n.finalizeRegisterIFrame=h;n.getIFrame=l,function(n){function r(){var n=navigator.userAgent,i,t;if(n.indexOf("Android")>-1&&n.indexOf("Chrome/27")>-1||n.indexOf("Safari")>-1&&n.indexOf("Macintosh")>-1&&n.indexOf("Version/6")>-1||n.match(/.*Version\/([0-5]|(6\.0)).*Safari.*/gi)!=null)return!1;for(i=["mozFullScreenEnabled","fullScreenEnabled","fullscreenEnabled","webkitFullScreenEnabled","webkitFullscreenEnabled"],t=0;t<i.length;t++)if(document[i[t]]!=undefined)return document[i[t]];return!1}function f(n){if(!r)throw Error("Cannot use fullscreen api when not available");if(!t()){var i=n&&n.element?n.element:document.body;i.requestFullScreen?i.requestFullScreen():i.mozRequestFullScreen?i.mozRequestFullScreen():i.msRequestFullscreen?i.msRequestFullscreen():i.webkitRequestFullscreen?i.webkitRequestFullscreen():i.webkitRequestFullScreen&&(n&&n.requiresKeyboard?i.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT):i.webkitRequestFullScreen())}}function e(){if(!r)throw Error("Cannot use fullscreen api when not available");if(t()){var n=document;n.cancelFullScreen?n.cancelFullScreen():n.exitFullscreen?n.exitFullscreen():n.mozCancelFullScreen?n.mozCancelFullScreen():n.webkitCancelFullScreen?n.webkitCancelFullScreen():n.webkitCancelFullscreen?n.webkitCancelFullscreen():n.msExitFullscreen&&n.msExitFullscreen()}}function t(){return document.fullscreenElement!=null||document.mozFullScreenElement!=null||document.webkitFullscreenElement!=null||document.msFullscreenElement!=null||document.webkitCurrentFullScreenElement!=null}function i(){t()?(document.body.style.width="100%",document.body.style.height="100%",u="fullscreen"):(document.body.style.width="",document.body.style.height="",u="inline");c()}n.available=r;n.enter=f;n.exit=e;n.isActive=t;document.addEventListener&&(document.addEventListener("fullscreenchange",i,!1),document.addEventListener("mozfullscreenchange",i,!1),document.addEventListener("webkitfullscreenchange",i,!1),document.addEventListener("MSFullscreenChange",i,!1))}(n.fsapi||(n.fsapi={}));v=n.fsapi,function(i){function f(){t()&&e!=null?r.setValue("parent","requestdisplay","fullscreen"):(u="fullscreen",c())}function o(){t()&&e!=null?r.setValue("parent","requestdisplay","inline"):(u="inline",c())}function s(t,i){var e=n.getIFrame(t),s,h,c;i=="fullscreen"?(e.setAttribute("data-cd-style",e.style.cssText),e.setAttribute("data-cd-frameborder",e.frameBorder),e.style.cssText+=navigator.userAgent.indexOf("iPad")>-1?"-webkit-transform: translate3d(0,0,0);position:fixed;z-index:999999;top:0;bottom:0;left:0;right:0;margin:0;height:100%;width:100%;":"position:fixed;z-index:999999;top:0;bottom:0;left:0;right:0;margin:0;height:100%;width:100%;",e.frameBorder="0",u!="fullscreen"&&f()):(s="",h=e.attributes["data-cd-style"],h!=null&&(s=h.value),c=e.attributes["data-cd-frameborder"],c!=null&&(e.frameBorder=c.value),e.style.cssText=s,u!="inline"&&o());r.setValue(t,"displaychanged",i)}i.enter=f;i.exit=o;i.setMode=s;r.subscribe("*","set","requestdisplay",function(n,t){s(n,t.value)});r.subscribe("*","set","displaychanged",function(n,t){u=t.value;c()})}(n.fspoly||(n.fspoly={}));y=n.fspoly}(i||(i={}));t.fullscreen=y;t.inline=p;t.mode=o;t.childMode=w;t.change=b;t.getHostClientSize=k;t.setAsFixSizeHost=d,function(){b(function(){var t=n.display.mode();i.removeHtmlClasses("cet-fullscreen","cet-inline");i.addHtmlClasses("cet-"+t)});i.addHtmlClasses("cet-"+o());i.tryRegisterChildren();r.subscribe("parent","set","id",function(n,t){e=t.value;r.setValue("parent","readystate","ready");r.emptyQueue()});r.subscribe("*","getreq","hostclientsize",function(){if(f("fixsizehost is "+a),!v()||a){var n=0,t=0;return o()!="fullscreen"&&(n=s.horizontalMargins,t=s.verticalMargins),{width:document.documentElement.clientWidth-n,height:document.documentElement.clientHeight-t}}});r.subscribe("*","set","readystate",function(n){var t=i.getIFrame(n);t&&i.finalizeRegisterIFrame(t)});i.hasParent()&&(f("say hello"),r.post("parent","hello"))}()})(n.display||(n.display={}));var t=n.display}(cet||(cet={}));(typeof cet=="undefined"||typeof cet.content=="undefined"||typeof cet.content.Host=="undefined")&&function(n){(function(t){var e="",r="contentApp",s=0,h,i,o,f,u;(typeof console=="undefined"||typeof window.console.log=="undefined")&&(window.console=new function(){this.log=this.warn=function(){}}),function(n){function t(n){var t,i;return n==null||n.length==0?n:(t=document.createElement("a"),t.appendChild(document.createTextNode(n)),i=t.parentNode.innerHTML,i.length>0?i:n)}function i(n){if(n==null||n.length==0)return n;var t=document.createElement("a");return t.innerHTML=n,t.textContent.length>0?t.textContent:n}n.htmlEncode=t;n.htmlDecode=i}(t.Helpers||(t.Helpers={}));h=t.Helpers,function(n){function h(n,i,r){var u=new o("setValue",i,r);t(n,"valueexchange",u)}function c(i,r,u){var f=new o("getValue",r);n.callbacks[f.messageID]=u;t(i,"valueexchange",f)}function l(n){var o,i,t,r,f,s;if(n.data.indexOf("cet.content")==0&&(o=Array.prototype.slice.call(document.getElementsByTagName("iframe")),i=o.filter(function(t){return t.contentWindow==n.source})[0],i!=null)){if(t=u.get(i),r=n.data.split(e),r[1].toLowerCase()=="hello"){f=parseInt(i.getAttribute("data-hello-count"))||0;i.getAttribute("data-autoinit")==="true"&&(t==null||!t.isInit||f>0)&&u.init(i);i.setAttribute("data-hello-count",(f+1).toString());return}if(t!=null)switch(r[1].toLowerCase()){case"valueexchange":s=JSON.parse(r[2])[0];a(t,s);break;case"ready":t.isReady=!0;break;case"dying":t.isReady=!1;t.isInit=!1}}}function r(){var r,u,i;if(n.msgQueue.length==0)return!0;for(r=[],i=0;i<n.msgQueue.length;i++)u=n.msgQueue[i],u.app.isReady&&(n.msgQueue.splice(i,1),r.push(u),i--);for(i=0;i<r.length;i++)t.apply(this,r[i].args);return n.msgQueue.length==0}function f(){n.msgQueueRunning||(n.msgQueueRunning=!0,r()?n.msgQueueRunning=!1:setTimeout(function(){n.msgQueueRunning=!1;f()},50))}function t(t,i){for(var h,c,s,o=[],u=0;u<arguments.length-2;u++)o[u]=arguments[u+2];if(!t.isReady){h=arguments;n.msgQueue.push({app:t,args:h});f();return}r();c=t.element;s="cet.content"+e+i;o.length>0&&(s+=e+JSON.stringify(o));c.contentWindow.postMessage(s,"*")}function a(r,u){var f,e;if(r)if(u.type=="getValue")u.value=undefined,f=s(r,"getreq",u,!0),f.length>0?u.value=f[0](r,u):r.onGetValueRequested&&(e=r.onGetValueRequested(u.key),u.value=e),u.type="getValueResult",t(r,"valueexchange",u);else if(u.type=="setValue"){if(i(r,"set",u),u.key.substring(0,4)=="sys.")return;if(!r.onSetValueRequested)return;r.onSetValueRequested.call(r,u.key,u.value)}else if(u.type=="getValueResult"){if(i(r,"get",u),!(u.messageID in n.callbacks))return;n.callbacks[u.messageID].call(r,u.key,u.value)}}function v(t,i,r,u){n.subscriptions.push({app:u,type:t,key:i,handler:r})}function y(t,i,r,u){for(var e=n.subscriptions.length,f;e--;)f=n.subscriptions[e],f.type!=t&&t!="*"||f.key!=i&&i!="*"||f.handler!=r&&r||u&&(f.app==null||f.app.element!=u.element)||n.subscriptions.splice(e,1)}function i(n,t,i){for(var u=s(n,t,i),r=0;r<u.length;r++)u[r](n,i)}function s(t,i,r,u){for(var f,o=[],e=0;e<n.subscriptions.length;e++)f=n.subscriptions[e],f.type!=i&&(f.type!="*"||u)||f.key!="*"&&f.key!=r.key||f.app&&f.app.element!=t.element||o.push(f.handler);return o}n.callbacks={};n.subscriptions=[];n.msgQueue=[];n.msgQueueTimeout=null;n.msgQueueRunning=!1;n.setValue=h;n.getValue=c;n.post=t;n.subscribe=v;n.unsubscribe=y;n.publish=i;window.addEventListener("message",l,!1)}(i||(i={}));o=function(){function n(n,t,i){this.messageID=(s++).toString();this.key=t;this.value=i;this.type=n}return n.createEmpty=function(){var t=new n;return t.messageID=(s++).toString(),t},n}();f=function(){function n(n,t,i,r){this.onGetValueRequested=t;this.onSetValueRequested=i;this.element=n;this.name=n.src;this.isReady=!1;this.isInit=!1;this.creationDate=new Date;this.updateSize=function(n){n=n||u.getSizingSettings(this.element);n=this.calculateSizingByContainer(n);this.setValue("sys.ui.resize",n)};this.setExtendedProperties(r)}return n.prototype.calculateSizingByContainer=function(n){var t=this.percentToRatio(this.element.style.width);return isNaN(t)||(n.calcWidth=t*this.getBlockParent(this.element).clientWidth),t=this.percentToRatio(this.element.style.height),isNaN(t)||(n.calcHeight=t*this.getBlockParent(this.element).clientHeight),n},n.prototype.getBlockParent=function(n){for(var t=n.parentElement;t!=document.body&&t!=null;t=t.parentElement)if(getComputedStyle(t).getPropertyValue("display")=="block")return t;return t},n.prototype.percentToRatio=function(n){if(n&&n.length>0&&n.charAt(n.length-1)=="%"){var t=Number(n.substr(0,n.length-1));if(!isNaN(t))return t/100}return 1},n.prototype.setExtendedProperties=function(n){if(n!=null)for(var t in n)this[t]=n[t]},n.prototype.getValue=function(n,t){i.getValue(this,n,t)},n.prototype.setValue=function(n,t){i.setValue(this,n,t)},n}();t.App=f,function(t){function s(n){var t=document.createDocumentFragment(),i=document.createElement("body"),r;for(i.innerHTML=n.textContent;r=i.firstChild;)t.appendChild(r);return t}function o(n){for(var r,i=null,t=n;t!=document.documentElement;t=t.parentElement)if(t.classList.contains("cet-content-container")){i=t;break}return r={},i!=null?{width:"_self",maxHeight:i.clientHeight}:{width:"_self",maxHeight:window.innerHeight}}function u(t,i,u,h){var c=t[r],b,p,y;c==null?(c=new f(t,i,u,h),c.element=t,t[r]=c):(i!=null&&(c.onGetValueRequested=i),u!=null&&(c.onSetValueRequested=u),h!=null&&c.setExtendedProperties(h));var c=t[r],v=function(n){return t.getAttribute("data-"+n)},w=s(t),a={},l={};l.allowDisplayModes=v("allowdisplaymodes")!="false";l.autostart=v("autostart")=="true";l.debug=v("debug")=="true";l.previewEnabled=v("previewenabled")!="false";l.sizing=o(t);l.sizing=c.calculateSizingByContainer(l.sizing);w.querySelector("script.options")!=null&&(a=JSON.parse(w.querySelector("script.options").textContent),"preset"in a&&(l.preset=a.preset),"skin"in a&&(l.skin=a.skin));c.setValue("sys.init",l);v("displayMode")=="fullscreen"&&n.display.childMode(t,"fullscreen");for(b in e.providers)p=e.providers[b],p.initApp&&p.initApp(c,a);return c.setValue("sys.readystate","ready"),t.setAttribute("data-autoinit","true"),c.isInit=!0,typeof CustomEvent=="function"?y=new CustomEvent("appadded",{bubbles:!0,cancelable:!1,detail:{app:c}}):(y=document.createEvent("CustomEvent"),y.initCustomEvent("appadded",!0,!1,{app:c})),t.dispatchEvent(y),c}function c(n,t){var r,i;if(console.warn("register is obsolete. use new embed script which auto initializes itself"),n.setAttribute("data-autoinit","false"),t)for(r=[{p:"allowDisplayModes",s:"allowDisplayModes"},{p:"autostart",s:"autostart"},{p:"debugMode",s:"debug"},{p:"debug",s:"debug"},{p:"previewEnabled",s:"previewEnabled"}],i=0;i<r.length;i++)r[i].p in t&&(n.setAttribute("data-"+r[i].s,t[r[i].p]),delete t[r[i]]);return t=t||{},"preset"in t&&(t.preset=h.htmlDecode(t.preset)),n.textContent='<script type="text/html" class="options">'+JSON.stringify(t)+"<\/script>",u(n,t.onGetValueRequested,t.onSetValueRequested,t.appProperties)}function l(n){console.warn("unregister is obsolete");var r;r=typeof n=="string"?t.get(n):n;i.unsubscribe("*","*",null,r)}function a(n,t,i,r){var f,s,o,e,h;if(console.warn("add is obsolete. use new embed script and init()"),f=[],r=r||{},s=Math.random().toString(),"id"in r&&(s=r.id),f.push('<iframe src="'+n+'" '),f.push('data-autoinit="false" '),r)for(o=[{p:"allowDisplayModes",s:"allowDisplayModes"},{p:"autostart",s:"autostart"},{p:"debugMode",s:"debug"},{p:"previewEnabled",s:"previewEnabled"}],e=0;e<o.length;e++)o[e].p in r&&f.push("data-"+o[e].s+'="'+r[o[e].p]+'" ');return f.push('id="cc-'+s+'" '),f.push('seamless="seamless" style="width:'+t.toString()+"px; height:"+i.toString()+'px;border:0" frameBorder="0" mozallowfullscreen="true" webkitallowfullscreen="true">'),typeof r!="undefined"&&f.push('<script type="text/html" class="options">'+JSON.stringify(r)+"<\/script>"),f.push("<\/iframe>"),document.writeln(f.join("")),h=document.getElementById("cc-"+s),u(h,r.onGetValueRequested,r.onSetValueRequested,r.appProperties)}function v(n){var t,i;return n==null?null:(typeof n=="string"?(console.warn("getting by ID is obsolete. Get using IFRAME"),t=document.getElementById("cc-"+n)||document.getElementById(n)):t=n,i=t[r],i==null&&(i=new f(t),t[r]=i),i)}(function(n){function t(t,r){n.providers[r]=t;t.publish=function(){i.publish.apply(i,arguments)};t.subscribe=function(){i.subscribe.apply(i,arguments)}}function r(r){return r&&(i.unsubscribe("*","sys.store.state",null,null),i.subscribe("set","sys.store.state",function(n,t){r.save(n,t.value)}),i.subscribe("getreq","sys.store.state",function(n){return r.load(n)}),t(r,"store")),n.providers.store}n.providers={};n.registerProvider=t;n.store=r})(t.providers||(t.providers={}));var e=t.providers;t.getSizingSettings=o;t.init=u;t.register=c;t.unregister=l;t.add=a;t.get=v}(t.Host||(t.Host={}));u=t.Host;i.subscribe("set","sys.ui.height",function(n,t){n.element.style.height=t.value+"px"});i.subscribe("set","sys.ui.width",function(n,t){n.element.style.width=t.value+"px"});i.subscribe("set","sys.ui.resizeto",function(n,t){t.value.width!=undefined&&(n.element.style.width=t.value.width+"px");t.value.height!=undefined&&(n.element.style.height=t.value.height+"px")});window.addEventListener("load",function(){document.getElementsByClassName("cet-content-container").length==0&&document.addEventListener("appadded",function(n){var t=n.detail.app,i=t.element;window.addEventListener("resize",function(){var n=u.getSizingSettings(i);t.updateSize(n)})},!1)})})(n.content||(n.content={}));var t=n.content}(cet||(cet={}));
//# sourceMappingURL=host.min.js.map
